@model ProductDetailVM

@{
    ViewData["Title"] = "Detail";
}


<!-- main wrapper start -->
<main>
    <!-- breadcrumb area start -->
    <div class="breadcrumb-area bg-img" data-bg="~/assets/img/banner/breadcrumb-banner.jpg">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="breadcrumb-wrap text-center">
                        <nav aria-label="breadcrumb">
                            <h1 class="breadcrumb-title">shop</h1>
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Home</a></li>
                                <li class="breadcrumb-item"><a asp-controller="Shop" asp-action="Index">Shop</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Product Details</li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- breadcrumb area end -->
    <!-- product details wrapper start -->
    <div class="product-details-wrapper section-padding">
        <div class="container custom-container">
            <div class="row">
                <div class="col-12">
                    <!-- product details inner end -->
                    <div class="product-details-inner">
                        <div class="row">
                            <div class="col-lg-5">
                                <div class="product-large-slider mb-20">

                                    <div class="pro-large-img img-zoom">
                                        <img src="~/assets/img/product/@Model.Product.Image" alt="" />
                                    </div>


                                </div>
                                <div class="pro-nav slick-row-5">
                                    @foreach (var item in Model.Product.ProductImages)
                                    {

                                        <div class="pro-nav-thumb"><img src="~/assets/img/product/@item.Image" alt="" /></div>
                                    }
                                </div>
                            </div>

                            <div class="col-lg-7">
                                <div class="product-details-des">
                                    <h3 class="pro-det-title">@Model.Product.Title</h3>
                                    <div class="pro-review">
                                        <span>
                                            <a href="#">
                                                Review(s)
                                            </a>
                                        </span>
                                    </div>
                                    <div class="price-box">
                                        <span class="regular-price">$@Model.Product.Price</span>
                                        <span class="old-price"><del>$@Model.Product.Discount</del></span>
                                    </div>
                                    <p>
                                        @Model.Product.Description
                                    </p>
                                    <div class="quantity-cart-box d-flex align-items-center mb-20">
                                        <div class="quantity">
                                            <a data-id="@Model.Product.Id" id="downbtn" class="dec qtybtn">-</a>
                                            <div class="ml-3 inp-value">1</div>
                                            <a data-id="@Model.Product.Id" id="upbtn" class="inc qtybtn">+</a>
                                        </div>
                                        <a asp-controller="product" asp-action="addbasket" asp-route-id="@Model.Product.Id" class="btn btn-default">Add To Cart</a>
                                    </div>
                                    <div class="availability mb-20">
                                        <h5 class="cat-title">Availability:</h5>
                                        <span>In Stock</span>
                                    </div>
                                    <div class="share-icon">
                                        <h5 class="cat-title">Share:</h5>
                                        <a href="#"><i class="fa fa-facebook"></i></a>
                                        <a href="#"><i class="fa fa-twitter"></i></a>
                                        <a href="#"><i class="fa fa-pinterest"></i></a>
                                        <a href="#"><i class="fa fa-google-plus"></i></a>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                    <!-- product details inner end -->
                    <!-- product details reviews start -->
                    <div class="product-details-reviews section-padding">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="product-review-info">
                                    <ul class="nav review-tab">
                                        <li>
                                            <a class="active" data-toggle="tab" href="#tab_one">description</a>
                                        </li>
                                        <li>
                                            <a data-toggle="tab" href="#tab_two">information</a>
                                        </li>
                                        <li>
                                            <a data-toggle="tab" href="#tab_three">reviews</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content reviews-tab">
                                        <div class="tab-pane fade show active" id="tab_one">
                                            <div class="tab-one">
                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam fringilla augue nec est tristique auctor. Ipsum metus feugiat sem, quis fermentum turpis eros eget velit. Donec ac tempus ante. Fusce ultricies massa massa. Fusce aliquam, purus eget sagittis vulputate, sapien libero hendrerit est, sed commodo augue nisi non neque.</p>
                                                <div class="review-description">
                                                    <div class="tab-thumb">
                                                        <img src="~/assets/img/about/services.jpg" alt="">
                                                    </div>
                                                    <div class="tab-des">
                                                        <h3>Product Information :</h3>
                                                        <ul>
                                                            <li>Donec non est at libero vulputate rutrum</li>
                                                            <li>Morbi ornare lectus quis justo gravida</li>
                                                            <li>Pellentesque aliquet, sem eget laoreet</li>
                                                            <li>Donec a neque libero</li>
                                                            <li>Pellentesque aliquet, sem eget laoreet</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <p>Cras neque metus, consequat et blandit et, luctus a nunc. Etiam gravida vehicula tellus, in imperdiet ligula euismod eget. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nam erat mi, rutrum at sollicitudin rhoncus, ultricies posuere erat. Duis convallis, arcu nec aliquam consequat, purus felis vehicula felis, a dapibus enim lorem nec augue. Nunc facilisis sagittis ullamcorper.</p>
                                                <p>Proin lectus ipsum, gravida et mattis vulputate, tristique ut lectus. Sed et lorem nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean eleifend laoreet congue. Vivamus adipiscing nisl ut dolor dignissim semper. Nulla luctus malesuada tincidunt.</p>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="tab_two">
                                            <table class="table table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td>color</td>
                                                        <td>black, blue, red</td>
                                                    </tr>
                                                    <tr>
                                                        <td>size</td>
                                                        <td>L, M, S</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="tab-pane fade" id="tab_three">
                                            <form method="post" asp-controller="product" asp-action="addcomment" class="review-form">
                                                <h5>1 review for <span>Chaz Kangeroo Hoodies</span></h5>
                                                @foreach (var item in Model.Comments)
                                                {
                                                    if (item.AppUser.UserName == User.Identity.Name)
                                                    {
                                                        <div class="total-reviews">
                                                            <div class="rev-avatar">
                                                                <img src="~/assets/img/about/avatar.jpg" alt="">
                                                            </div>
                                                            <div class="review-box">
                                                                <div class="ratings">
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span><i class="fa fa-star"></i></span>
                                                                    <a asp-controller="product" asp-action="deletecomment" asp-route-id="@item.Id" class="text-danger"><i class="far fa-times-circle" style="font-size:20px;"></i></a>

                                                                </div>
                                                                <div class="post-author">
                                                                    <p><span>@item.AppUser.FullName.ToUpper() -</span> @item.Date.ToString("dd , MM  yyyy")</p>
                                                                </div>
                                                                <p>@item.Message</p>
                                                            </div>
                                                        </div>}
                                                    else
                                                    {
                                                        <div class="total-reviews">
                                                            <div class="rev-avatar">
                                                                <img src="~/assets/img/about/avatar.jpg" alt="">
                                                            </div>
                                                            <div class="review-box">
                                                                <div class="ratings">
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span class="good"><i class="fa fa-star"></i></span>
                                                                    <span><i class="fa fa-star"></i></span>
                                                                </div>
                                                                <div class="post-author">
                                                                    <p><span>@item.AppUser.FullName.ToUpper() -</span> @item.Date.ToString("dd , MM  yyyy")</p>
                                                                </div>
                                                                <p>@item.Message</p>
                                                            </div>
                                                        </div>}
                                                }


                                                <div class="form-group row">
                                                    <div class="col">
                                                        <p>Your review *</p>
                                                        <label class="col-form-label"><span class="text-danger">*</span> Your Review</label>
                                                        <textarea class="form-control" name="Message"></textarea>
                                                        <input type="hidden" name="ProductId" value="@Model.Product.Id" />
                                                        <div class="help-block pt-10"><span class="text-danger">Note:</span> HTML is not translated!</div>
                                                    </div>
                                                    @*<div class="input">

                                                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="Message" style="font-size:15px;"></textarea>
                                                            <input type="hidden" name="ProductId" value="@Model.Product.Id" />
                                                        </div>*@
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col">
                                                        <label class="col-form-label"><span class="text-danger">*</span> Rating</label>
                                                        &nbsp;&nbsp;&nbsp; Bad&nbsp;
                                                        <input type="radio" value="1" name="rating">
                                                        &nbsp;
                                                        <input type="radio" value="2" name="rating">
                                                        &nbsp;
                                                        <input type="radio" value="3" name="rating">
                                                        &nbsp;
                                                        <input type="radio" value="4" name="rating">
                                                        &nbsp;
                                                        <input type="radio" value="5" name="rating" checked>
                                                        &nbsp;Good
                                                    </div>
                                                </div>
                                                <div class="buttons">
                                                    <button class="sqr-btn" type="submit">Submit</button>
                                                </div>
                                            </form><!-- end of review-form -->
                                        </div>
                                        @*<form method="post" asp-controller="product" asp-action="addcomment">
                                                <div class="input">

                                                    <p>Your review *</p>
                                                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="Message" style="font-size:15px;"></textarea>
                                                    <input type="hidden" name="ProductId" value="@Model.Products.Id" />
                                                </div>

                                                <button type="submit" class="btn">Submit</button>
                                            </form>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- product details reviews end -->
                    <!-- featured product area start -->
                    <section class="Related-product">
                        <div class="container">
                            <div class="row">
                                <div class="col-12">
                                    <div class="section-title text-center">
                                        <h2 class="title">Related Product</h2>
                                        <p class="sub-title">Lorem ipsum dolor sit amet consectetur adipisicing</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="product-carousel-4 mbn-50 slick-row-15 slick-arrow-style">
                                        @foreach (var item in Model.RelatedProducts)
                                        {
                                            <!-- product single item start -->
                                            <div class="product-item mb-50">
                                                <div class="product-thumb">
                                                    <a asp-controller="Product" asp-action="detail" asp-route-id="@item.Id" asp-route-categoryId="@foreach (var category in item.ProductCategories)
                                                                                                               {
                                                                                                                   @category.Category.Id
                                                                                                               }">
                                                        >
                                                        <img src="~/assets/img/product/@item.Image" alt="">
                                                    </a>
                                                </div>
                                                <div class="product-content">
                                                    <h5 class="product-name">
                                                        <a asp-controller="Product" asp-action="detail" asp-route-id="@item.Id">@item.Title</a>
                                                    </h5>
                                                    <div class="price-box">
                                                        <span class="price-regular">$@item.Price</span>
                                                        <span class="price-old"><del>$ @(item.Price * (100 + item.Campaign.DiscountPercent)/100)</del></span>
                                                    </div>
                                                    <div class="product-action-link">
                                                        <a href="#" data-toggle="tooltip" title="Wishlist"><i class="ion-android-favorite-outline"></i></a>
                                                        <a href="#" data-toggle="tooltip" title="Add To Cart"><i class="ion-bag"></i></a>
                                                        <a href="#" data-toggle="modal" data-target="#quick_view">
                                                            <span data-toggle="tooltip"
                                                                  title="Quick View"><i class="ion-ios-eye-outline"></i></span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- product single item start -->
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- featured product area end -->
                </div>
            </div>
        </div>
    </div>
    <!-- product details wrapper end -->
</main>
<!-- main wrapper end -->

@section ScriptsJs{
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>

        $(document).ready(function () {

            $(document).on("click", ".dec", function (e) {
                e.preventDefault();
                var id = $(this).attr("data-id")
                var total = document.querySelector("#total-price")
                var money = document.querySelectorAll(".pro-price")

                console.log(id)
                $.ajax({
                    url: "/basket/minus",
                    data: {
                        id: id
                    },
                    type: "post",
                    datatype: "json",
                    success: function (data) {
                        money.forEach(mon => {
                            if (id == mon.getAttribute("data-id")) {
                                mon.innerHTML += data.price
                                // console.log(data.price)
                            }
                        })
                        money.innerHTML += `${data.totalPrice}`

                    }
                })

            })


            $(document).on("click", ".inc", function (e) {
                e.preventDefault();
                var id = $(this).attr("data-id")
                var total = document.querySelector("#total-price")
                var money = document.querySelectorAll(".pro-price")
                console.log(id)
                $.ajax({
                    url: "/basket/plus",
                    data: {
                        id: id
                    },
                    type: "post",
                    datatype: "json",
                    success: function (data) {
                        money.forEach(mon => {
                            if (id == mon.getAttribute("data-id")) {
                                mon.innerHTML = data.price
                                console.log(data.price)
                            }
                        })
                        money.innerHTML += `${data.totalPrice}`

                    }
                })

            })



        })



    </script>
}